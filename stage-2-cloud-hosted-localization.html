<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Stage 2 – Cloud Hosted Localization (CDN)</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 text-slate-900">
  <div class="max-w-6xl mx-auto px-6 py-10">
    <!-- Header -->
    
  <!-- Top Navigation -->
  <nav class="mb-8">
    <div class="flex flex-wrap items-center justify-between gap-4 rounded-xl bg-white px-5 py-3 shadow-sm ring-1 ring-slate-200">
      <a href="./index.html" class="text-sm font-semibold text-slate-900 hover:underline">
        ← Back to Home
      </a>
      <div class="flex flex-wrap gap-4 text-sm">
        <a href="https://github.com/shahnawaz/localization-architecture" target="_blank" class="text-slate-600 hover:underline">
          Repository
        </a>
        <a href="https://github.com/shahnawaz" target="_blank" class="text-slate-600 hover:underline">
          @shahnawaz
        </a>
      </div>
    </div>
  </nav>

    <header class="mb-8">
      <div class="inline-flex items-center gap-2 rounded-full bg-white px-4 py-2 shadow-sm ring-1 ring-slate-200">
        <span class="h-2 w-2 rounded-full bg-sky-500"></span>
        <span class="text-sm font-semibold">Stage 2 – Cloud Hosted</span>
        <span class="text-sm text-slate-600">Remote locale packs via CDN + fallback English in build</span>
      </div>
      <h1 class="mt-4 text-3xl font-bold tracking-tight">Decouple translations from releases</h1>
      <p class="mt-2 text-slate-600 max-w-3xl">
        Ship only the base language (English) inside the app for guaranteed first paint. Serve other locales as versioned
        JSON “packs” from cloud storage behind a CDN, with safe fallback behavior and device caching.
      </p>
    </header>

    <!-- Main -->
    <section class="bg-white rounded-2xl shadow-sm ring-1 ring-slate-200 p-6">
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 items-start">

        <!-- Column 1: Sources -->
        <div class="space-y-4">
          <div class="rounded-2xl border border-slate-200 p-5">
            <div class="flex items-start justify-between gap-3">
              <div>
                <h2 class="font-semibold text-lg">What ships in the app</h2>
                <p class="text-sm text-slate-600 mt-1">Base pack for predictable startup</p>
              </div>
              <span class="text-xs font-semibold bg-emerald-50 text-emerald-700 px-2 py-1 rounded-full">Bundled</span>
            </div>

            <div class="mt-4 space-y-3">
              <div class="rounded-xl bg-slate-50 border border-slate-200 p-3">
                <div class="flex items-center justify-between">
                  <span class="font-mono text-sm">/locale/en.json</span>
                  <span class="text-xs text-slate-500">Fallback</span>
                </div>
                <p class="mt-2 text-xs text-slate-500">
                  Used immediately on first render and whenever remote packs are missing/unavailable.
                </p>
              </div>
            </div>
          </div>

          <div class="rounded-2xl border border-slate-200 p-5">
            <div class="flex items-start justify-between gap-3">
              <div>
                <h2 class="font-semibold text-lg">Remote locale packs</h2>
                <p class="text-sm text-slate-600 mt-1">Hosted + distributed globally</p>
              </div>
              <span class="text-xs font-semibold bg-sky-50 text-sky-700 px-2 py-1 rounded-full">Cloud + CDN</span>
            </div>

            <div class="mt-4 space-y-3">
              <div class="rounded-xl bg-slate-50 border border-slate-200 p-3">
                <div class="flex items-center justify-between">
                  <span class="font-mono text-sm">/i18n/v{VERSION}/es-ES.json</span>
                  <span class="text-xs text-slate-500">Example</span>
                </div>
              </div>
              <div class="rounded-xl bg-slate-50 border border-slate-200 p-3">
                <div class="flex items-center justify-between">
                  <span class="font-mono text-sm">/i18n/v{VERSION}/fr-FR.json</span>
                  <span class="text-xs text-slate-500">Example</span>
                </div>
              </div>
              <div class="rounded-xl bg-slate-50 border border-slate-200 p-3">
                <div class="flex items-center justify-between">
                  <span class="font-mono text-sm">/i18n/v{VERSION}/ar.json</span>
                  <span class="text-xs text-slate-500">RTL supported</span>
                </div>
              </div>
            </div>

            <div class="mt-4 rounded-xl bg-white border border-slate-200 p-4">
              <div class="text-sm font-semibold">Versioning & cache control</div>
              <ul class="mt-2 space-y-1 text-xs text-slate-600">
                <li>• Packs are immutable per version (safe CDN caching).</li>
                <li>• App requests specific version (from config/bootstrap).</li>
                <li>• CDN uses <span class="font-mono">Cache-Control</span> / <span class="font-mono">ETag</span> for fast revalidation.</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Column 2: Runtime flow -->
        <div class="space-y-4">
          <div class="rounded-2xl border border-slate-200 p-5">
            <h2 class="font-semibold text-lg">Runtime flow (app launch)</h2>
            <p class="text-sm text-slate-600 mt-1">Fast first paint, then upgrade to remote translations.</p>

            <ol class="mt-4 space-y-3">
              <li class="flex gap-3">
                <div class="mt-1 h-6 w-6 rounded-full bg-slate-900 text-white text-xs flex items-center justify-center">1</div>
                <div class="flex-1">
                  <div class="font-semibold">Resolve locale</div>
                  <div class="text-sm text-slate-600">User preference → OS language → fallback chain</div>
                </div>
              </li>

              <li class="flex gap-3">
                <div class="mt-1 h-6 w-6 rounded-full bg-slate-900 text-white text-xs flex items-center justify-center">2</div>
                <div class="flex-1">
                  <div class="font-semibold">Render with base English</div>
                  <div class="text-sm text-slate-600">No blocking on network for first UI</div>
                </div>
              </li>

              <li class="flex gap-3">
                <div class="mt-1 h-6 w-6 rounded-full bg-slate-900 text-white text-xs flex items-center justify-center">3</div>
                <div class="flex-1">
                  <div class="font-semibold">Fetch bootstrap config</div>
                  <div class="text-sm text-slate-600">Returns <span class="font-mono">i18nVersion</span> + locale mapping rules</div>
                </div>
              </li>

              <li class="flex gap-3">
                <div class="mt-1 h-6 w-6 rounded-full bg-slate-900 text-white text-xs flex items-center justify-center">4</div>
                <div class="flex-1">
                  <div class="font-semibold">Load locale pack</div>
                  <div class="text-sm text-slate-600">CDN → (edge cache) → device cache</div>
                </div>
              </li>

              <li class="flex gap-3">
                <div class="mt-1 h-6 w-6 rounded-full bg-slate-900 text-white text-xs flex items-center justify-center">5</div>
                <div class="flex-1">
                  <div class="font-semibold">Merge + rerender</div>
                  <div class="text-sm text-slate-600">UI updates to Spanish/French/Arabic when ready</div>
                </div>
              </li>
            </ol>
          </div>

          <div class="rounded-2xl border border-slate-200 p-5">
            <h3 class="font-semibold">Caching strategy (two layers)</h3>
            <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-3">
              <div class="rounded-xl bg-slate-50 border border-slate-200 p-4">
                <div class="flex items-center justify-between">
                  <span class="font-semibold text-sm">CDN edge cache</span>
                  <span class="text-xs text-slate-500">regional</span>
                </div>
                <ul class="mt-2 space-y-1 text-xs text-slate-600">
                  <li>• First request in a region warms the edge</li>
                  <li>• Then most users get instant hits</li>
                  <li>• Immutable versioned URLs cache well</li>
                </ul>
              </div>
              <div class="rounded-xl bg-slate-50 border border-slate-200 p-4">
                <div class="flex items-center justify-between">
                  <span class="font-semibold text-sm">Device cache</span>
                  <span class="text-xs text-slate-500">offline-friendly</span>
                </div>
                <ul class="mt-2 space-y-1 text-xs text-slate-600">
                  <li>• Store last-used locale pack locally</li>
                  <li>• Next launch: instant local read</li>
                  <li>• Background refresh if version changed</li>
                </ul>
              </div>
            </div>

            <div class="mt-4 rounded-xl bg-white border border-slate-200 p-4">
              <div class="text-sm font-semibold">Safe fallback behavior</div>
              <p class="mt-1 text-xs text-slate-600">
                If a key is missing in the locale pack, the app falls back to English for that key (or the next locale in the chain).
                If the network is down, the app uses the device-cached pack; if none, it uses bundled English.
              </p>
            </div>
          </div>
        </div>

        <!-- Column 3: Tradeoffs + Why Stage 3 -->
        <div class="space-y-4">
          <div class="rounded-2xl border border-slate-200 p-5">
            <div class="flex items-start justify-between gap-3">
              <div>
                <h2 class="font-semibold text-lg">Who updates translations?</h2>
                <p class="text-sm text-slate-600 mt-1">Still mostly engineering-owned</p>
              </div>
              <span class="text-xs font-semibold bg-indigo-50 text-indigo-700 px-2 py-1 rounded-full">Ops/Eng</span>
            </div>

            <div class="mt-4 rounded-xl bg-slate-50 border border-slate-200 p-4">
              <p class="text-sm text-slate-700">
                Engineers can upload new locale packs (or sync from a repo) to cloud storage.
                Clients receive updates without a new app release.
              </p>
              <div class="mt-3 flex flex-wrap gap-2">
                <span class="text-xs font-semibold bg-emerald-50 text-emerald-700 px-2 py-1 rounded-full">No rebuild for copy change</span>
                <span class="text-xs font-semibold bg-sky-50 text-sky-700 px-2 py-1 rounded-full">Global CDN performance</span>
                <span class="text-xs font-semibold bg-slate-100 px-2 py-1 rounded-full">Fallback chain</span>
              </div>
            </div>
          </div>

          <div class="rounded-2xl border border-slate-200 p-5">
            <h3 class="font-semibold">Pros</h3>
            <ul class="mt-3 space-y-2 text-sm text-slate-700">
              <li class="flex gap-2">
                <span class="mt-1 h-2 w-2 rounded-full bg-emerald-500"></span>
                Copy updates without shipping a new build
              </li>
              <li class="flex gap-2">
                <span class="mt-1 h-2 w-2 rounded-full bg-emerald-500"></span>
                CDN delivers fast translations per region
              </li>
              <li class="flex gap-2">
                <span class="mt-1 h-2 w-2 rounded-full bg-emerald-500"></span>
                Device cache enables offline reuse
              </li>
            </ul>

            <h3 class="font-semibold mt-6">Cons</h3>
            <ul class="mt-3 space-y-2 text-sm text-slate-700">
              <li class="flex gap-2">
                <span class="mt-1 h-2 w-2 rounded-full bg-rose-500"></span>
                Still depends on engineering/ops to publish packs
              </li>
              <li class="flex gap-2">
                <span class="mt-1 h-2 w-2 rounded-full bg-rose-500"></span>
                Requires robust versioning + fallback handling
              </li>
              <li class="flex gap-2">
                <span class="mt-1 h-2 w-2 rounded-full bg-rose-500"></span>
                First-time locale load may briefly show English (unless preloaded)
              </li>
            </ul>
          </div>

          <div class="rounded-2xl bg-amber-50 border border-amber-200 p-5">
            <h3 class="font-semibold">Reason to evolve to Stage 3</h3>
            <p class="text-sm text-slate-700 mt-2">
              The platform is scalable, but the workflow isn’t: product teams still need engineers to update wording.
              Next step is a Localization Management System so PMs/designers can edit translations safely with approvals and audit.
            </p>
          </div>
        </div>
      </div>
    </section>
  </div>
</body>
</html>
